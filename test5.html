<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <div id="app">

        <template id="my-template" data-param1="">
            <div>
                <span>Hallo {{ my-template-params.param1 }} und {{ age }}</span>
            </div>
        </template>

        <template-use template-id="my-template" data-param1="{{ name }}">
        </template-use>

        <template-use template-id="my-template" data-param1="Test">
        </template-use>

        <template id="friends-template" data-list="">
            <ul>
                <each of="{{ friends-template-params.list }}" as="f*">
                    <li>{{ f*.name }} ist {{ f*.age }} Jahre alt
                        <if test="{{ f*.showChilds }}">
                            <template-use template-id="friends-template" data-list="f*.childs">
                            </template-use>
                        </if>
                    </li>
                </each>
            </ul>
        </template>

        <template-use template-id="friends-template" data-list="friends">
        </template-use>

    </div>

    <script type="module">
        import TemplateEngine from './template-engine.js'

        const data = TemplateEngine.reactive({
            name: 'Tobias',
            age: 31,
            counter: 1,
            showSecondHallo: true,
            nestedCondition: true,
            secondCondition: false,
            friends: [{
                name: 'Freund1',
                childs: [{
                    name: 'Freund1_1',
                    childs: [],
                    age: 20,
                    showChilds: false
                }, {
                    name: 'Freund1_2',
                    childs: [{
                        name: 'Freund1_2_1',
                        childs: [],
                        age: 30,
                        showChilds: false
                    }],
                    age: 22,
                    showChilds: false
                }],
                age: 23,
                showChilds: true
            }, {
                name: 'Freund2',
                childs: [{
                    name: 'Freund2_1',
                    childs: [],
                    age: 24,
                    showChilds: false
                }, {
                    name: 'Freund2_2',
                    childs: [],
                    age: 26,
                    showChilds: false
                }],
                age: 25,
                showChilds: true
            }],
        }, document.getElementById('app'))

        //render(data, document.getElementById('app'))
        
        data.friends[0].name = 'Tobias'
        data.friends[1].childs = [{ name: 'Test2_1', age: 30, childs: [{ name: 'Test2_1_1', childs: [] }, { name: 'Test2_1_2', childs: [] }], showChilds: true }, { name: 'Test2_2', age: 25, childs: [], showChilds: false }]
        //TODO: bei slice m√ºssten die NodeHolders nachgezogen werden
        delete data.friends[0].childs[0]
        data.friends[0].childs.push({ name: 'Freund1_3', age: 20, childs: [{ name: 'Freund1_3_1', age: 25, childs: [], showChilds: false }], showChilds: false })
        data.friends[0].childs[1].showChilds = true

    </script>

</body>

</html>