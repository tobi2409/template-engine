<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Attributes Demo - Template Engine</title>
</head>
<body>

    <div id="app"></div>

    <template id="app-template">
        <h1>üõçÔ∏è Product Catalog</h1>
        <p>Welcome, <strong><get>name</get></strong></p>

        <div style-color="themeColor" style-font-weight="emphasisWeight">
            You are browsing as <get>name</get> from <get>param1</get>
        </div>

        <h2>Categories</h2>
        <ul>
            <each of="categories" as="cat">
                <li attr-category-id="cat.id">
                    <strong><get>cat.name</get></strong> (<get>cat.itemCount</get> items)

                    <ul>
                        <each of="cat.products" as="prod">
                            <li attr-product-id="prod.id" attr-stock-status="prod.stockStatus">
                                <get>prod.name</get> - <get>param1</get> store
                            </li>
                        </each>
                    </ul>

                </li>
            </each>
        </ul>
    </template>

    <template-use id="app-template-use" template-id="app-template" mount-id="app" data-param1="Online"></template-use>

    <script type="module">
        import TemplateEngine from '../src/template-engine.js'

        const data = TemplateEngine.reactive({
            name: 'Emily Rodriguez',
            themeColor: '#2563eb',
            emphasisWeight: 'bold',
            categories: [{
                id: 1,
                name: 'Electronics',
                itemCount: 2,
                products: [{
                    id: 101,
                    name: 'Wireless Headphones',
                    stockStatus: 'in-stock'
                }, {
                    id: 102,
                    name: 'Smart Watch',
                    stockStatus: 'in-stock'
                }]
            }, {
                id: 2,
                name: 'Books',
                itemCount: 1,
                products: [{
                    id: 201,
                    name: 'JavaScript Essentials',
                    stockStatus: 'low-stock'
                }]
            }]
        }, document.getElementById('app-template-use'))

        // Demonstrate dynamic attribute updates
        data.categories[0].name = 'Electronics & Accessories'
        data.categories[0].products.push({ id: 103, name: 'USB-C Cable', stockStatus: 'in-stock' })
        data.categories[0].products.splice(1, 0, { id: 104, name: 'Laptop Stand', stockStatus: 'pre-order' })
        data.categories.splice(1, 0, { id: 3, name: 'Home & Garden', itemCount: 1, products: [{ id: 301, name: 'LED Desk Lamp', stockStatus: 'in-stock' }] })
        data.themeColor = '#dc2626'
        data.categories[0].products[2].stockStatus = 'out-of-stock'

        console.log('Catalog data:', data)
    </script>

</body>

</html>